<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This is the main function to estimate balancing weights for the reduction
of bias due to selection (e.g., loss to follow-up). It is essentially a
wrapper around the weightit function. Please refer to its
documentation for further details.
Essentially, the function takes as input a dataset and a formula describing
how the selection process might depend on the chosen covariates. It will
then estimate weights such that the distribution of the covariates among
selected and non-selected subjects is similar. These weights can finally
be used in most functions to fit regression models (e.g. the weights
parameter in the glm function).
If the formula is not passed as input, the function will simply create
a main-effects only formula (e.g., no interactions).
More information can be found in specialized texts, like
Hernán, M.A. and Robins, J.M., 2010. Causal inference."><title>Estimate weights to reduce bias due to selection — estimate_selection_weights • SelectionWeights</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate weights to reduce bias due to selection — estimate_selection_weights"><meta property="og:description" content="This is the main function to estimate balancing weights for the reduction
of bias due to selection (e.g., loss to follow-up). It is essentially a
wrapper around the weightit function. Please refer to its
documentation for further details.
Essentially, the function takes as input a dataset and a formula describing
how the selection process might depend on the chosen covariates. It will
then estimate weights such that the distribution of the covariates among
selected and non-selected subjects is similar. These weights can finally
be used in most functions to fit regression models (e.g. the weights
parameter in the glm function).
If the formula is not passed as input, the function will simply create
a main-effects only formula (e.g., no interactions).
More information can be found in specialized texts, like
Hernán, M.A. and Robins, J.M., 2010. Causal inference."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SelectionWeights</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Estimate weights to reduce bias due to selection</h1>
      
      <div class="d-none name"><code>estimate_selection_weights.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the main function to estimate balancing weights for the reduction
of bias due to selection (e.g., loss to follow-up). It is essentially a
wrapper around the weightit function. Please refer to its
documentation for further details.
Essentially, the function takes as input a dataset and a formula describing
how the selection process might depend on the chosen covariates. It will
then estimate weights such that the distribution of the covariates among
selected and non-selected subjects is <em>similar</em>. These weights can finally
be used in most functions to fit regression models (e.g. the <code>weights</code>
parameter in the <a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a> function).
If the formula is not passed as input, the function will simply create
a main-effects only formula (e.g., no interactions).
More information can be found in specialized texts, like
Hernán, M.A. and Robins, J.M., 2010. <em>Causal inference</em>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">estimate_selection_weights</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  <span class="va">id_str</span>,</span>
<span>  <span class="va">ids_not_censored</span>,</span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">method_estimation</span>,</span>
<span>  <span class="va">link_function</span>,</span>
<span>  <span class="va">stabilized</span>,</span>
<span>  <span class="va">winsorization</span>,</span>
<span>  <span class="va">estimate_by</span>,</span>
<span>  <span class="va">sampling_weights</span>,</span>
<span>  <span class="va">moments</span>,</span>
<span>  <span class="va">interactions</span>,</span>
<span>  <span class="va">library_sl</span>,</span>
<span>  <span class="va">cv_control_sl</span>,</span>
<span>  <span class="va">discrete_sl</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dat</dt>
<dd><p>The dataset containing a column for the identifier, and all
the covariates to be used when estimating the weights. A dataframe.</p></dd>


<dt>id_str</dt>
<dd><p>A string indicating the name of the column in <code>dat</code>
that contains the identifiers. A string.</p></dd>


<dt>ids_not_censored</dt>
<dd><p>A vector of identifiers corresponding to
the subjects not censored. That is, the subjects that were selected for
e.g., the follow-up. It must be a subset of the identifiers contained in
the <code>id_str</code> column of <code>dat</code>. A vector.</p></dd>


<dt>formula</dt>
<dd><p>A string representing the formula to be passed to
weightit. It must be of the form <code>"covariate_1 + ..."</code>.
It can include interactions and functions of the individual covariates
(e.g., a cubic spline). A string.</p></dd>


<dt>method_estimation</dt>
<dd><p>The type of model to fit to estimate the
balancing weights. It must be supported by the WeightIt R package.
The list of specific estimation methods can be found
<a href="https://ngreifer.github.io/WeightIt/reference/index.html" class="external-link">here</a>. A string.</p></dd>


<dt>link_function</dt>
<dd><p>The link used in the generalized linear model
for the propensity scores. If <code>glm</code> is used to estimate the balancing
weights, this simply is the model link function (e.g., <code>logit</code>). A string.</p></dd>


<dt>stabilized</dt>
<dd><p>For the methods that estimate propensity scores,
whether to stabilize the weights or not. That is, whether to multiply
the individual weights by the proportion of subjects in their
<em>treatment</em> group. A boolean.</p></dd>


<dt>discrete_sl</dt>
<dd></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Lorenzo Fabbri.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

